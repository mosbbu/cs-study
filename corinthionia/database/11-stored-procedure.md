## 저장 프로시저 (Stored PROCEDURE) 🧺

쿼리문들의 집합으로, 어떤 동작을 여러 쿼리를 거쳐서 일괄적으로 처리할 때 사용한다

<br/>

### 장점

- SQL Server의 성능 향상: 저장 프로시저를 처음에 실행하면 최적화, 컴파일 단계를 거쳐 그 결과가 캐시(메모리)에 저장되게 되는데, 이후 SP를 실행하면 캐시에 있는 것을 가져와 사용하므로 실행 속도가 빨라진다
- 유지 보수 및 재활용 측면
- 네트워크 부하 감소
- 보안 강화

<br/>

### 일반적인 SQL문과 저장 프로시저의 동작 방식 비교

- 일반 T-SQL 동작 방식: 일반적인 T-SQL → 구문분석 → 개체이름확인 → 사용권한확인 → 최적화 → 컴파일 및 실행계획 등록 → 실행
- 만약에 동일한 SQL문을 실행한다면: 동일한 T-SQL → 메모리(캐시) 확인 → 실행
- 저장 프로시저의 동작 방식: CREATE PROCEDURE → 구문분석 → 지연된 이름 확인 → 생성권한확인 → 시스템 테이블에 등록

<br/>

### 저장 프로시저의 문제점

- 항상 성능이 향상되는 것은 아니다 - 인덱스를 사용하면 오히려 성능이 바빠지게 된다

<br/>

---

<br>

## Reference

- [저장 프로시저 (Stored Procedure)란?](https://devkingdom.tistory.com/323)
