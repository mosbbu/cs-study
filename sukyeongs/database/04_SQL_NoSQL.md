## SQL vs NoSQL

<br>

### 📁 SQL

- **S**tructured **Q**uery **L**anguage 의 줄임말
- **관계형 데이터베이스**에 정보를 저장하고 처리하기 위한 프로그래밍 언어

> 💡 관계형 데이터베이스(**R**elational **D**ata**B**ase) : 데이터를 행과 열의 2차원 표 형태로 저장하는 데이터베이스
>
> 엑셀 시트처럼 빈칸에 데이터를 쌓아가는 데이터베이스라고 생각하면 편하다

RDB의 핵심적인 특징은 1) **정해진 데이터 스키마**에 따라 테이블에 저장된다는 것과 2) **관계**를 통해 여러 테이블에 분산된다는 것이다.

<br>

#### 1) 명확히 정해진 데이터 구조(스키마)가 존재한다.

데이터는 테이블에 `레코드` 형태로 저장되는데, 각 테이블마다 **명확하게 정해진 구조**(스키마)가 있다.

> **스키마를 준수하지 않은 레코드는 테이블에 추가할 수 없다.**

<br>

#### 2) 관계를 사용한다.

![](https://velog.velcdn.com/images/sukyeongs/post/0b9b5b2d-ab9b-4839-be12-408c1acaaae3/image.png)

위 사진의 Orders 테이블에서 user 정보를 저장할 때, 직접 user의 email, name을 저장하지 않고 **user의 id만 참조**하고 있다.

user의 email과 name을 직접 저장하게 된다면, 해당 user의 email이 바뀌는 경우, **Users 테이블과 Orders 테이블에서 모두 수정**해야 한다.

하지만 user_id만 저장하는 경우, user의 email이 바뀌어 Users 테이블이 업데이트 되면 자동적으로 Orders에서도 바뀐 데이터를 조회할 수 있게 된다.

> **데이터의 중복을 피하기 위해** 관계를 사용한다.

하나의 테이블에서 중복 없이 하나의 데이터만을 관리하기 때문에, 다른 테이블에서 **부정확한 데이터를 다룰 위험이 없어진다**는 장점이 있다.

<br>

### 🗽 NoSQL

- Not Only SQL / Non-Relational Operational Database SQL로 엇갈리나, 요즘은 다수가 **Not Only SQL**이라고 해석한다.

> **Not Only SQL** : 단순히 기존 관계형 DBMS가 갖고 있는 특성뿐만 아니라, **다른 특성들을 부가적으로 지원한다**는 의미를 내포한다.

- 비관계형 데이터베이스(NoSQL)도 관계형 데이터베이스와 방식은 다르지만, **관계 데이터를 저장할 수는 있다**.
- 관계형 DB의 주요 특성인 `ACID`(Atomic, Consistency, Integrity, Duarabity)를 제공하지 않는다.
  - SQL은 스키마를 따르지 않으면 데이터를 저장하는 것이 불가능하지만, `NoSQL`은 **다른 구조의 데이터를 같은 컬렉션에 저장**하는 것이 가능하다!
  - 확장성이 좋다. **수직적, 수평적 확장**을 모두 지원한다.

> **확장성(Scaling)** : 대규모적인 재설계 및 재설치없이 **확장이 얼마나 쉽고 가능한지**에 대한 용이성
>
> `수직적` 확장 : 단순히 DB 서버의 성능을 향상시키는 것 (ex. CPU 업그레이드)
>
> `수평적` 확장 : 많은 서버가 추가되어 DB가 전체적으로 분산되는 것

- 단순 검색, 데이터 추가 작업에 있어 매우 최적화된 키 값 저장 기법을 사용한다.
  - `JSON`과 비슷한 형태로 데이터를 저장한다.

> 💡 **NoSQL** : 초고용량 데이터 처리 등 성능에 특화된 목적을 위해, 비관계형 데이터 저장소에, 비구조적인 데이터를 저장하기 위한 분산 저장 시스템

<br>

## 둘 중에 뭘 선택해야 할까?

정답은 없다! **어떤 데이터를 다루느냐**에 따라 달라진다.

SQL / NoSQL의 장단점을 파악하여 어플리케이션에서 필요한 데이터의 특징에 맞게 선택하면 된다😆

<br>

### SQL의 장단점

#### SQL 장점

- 스키마가 명확하게 정의되어 **데이터 무결성**을 보장한다.
- 관계를 맺고 있는 테이블 간의 데이터를 **중복없이 한 번만 저장**한다.
  - NoSQL은 관계가 있는 컬렉션에 모두 데이터를 중복으로 저장해야 한다.

#### SQL 단점

- **덜 유연**하다.
- 데이터 스키마를 사전에 꼼꼼히 계획해야 한다.
  - 나중에 **스키마를 수정하기 힘들다**.
- 관계를 맺고 있어 조인문이 많은 복잡한 쿼리가 만들어질 수 있다.
- 대체로 수직적 확장만 가능하다.

<br>

### NoSQL의 장단점

#### NoSQL 장점

- 스키마가 없어 **유연하다**.
- 언제든 저장된 데이터를 조정하고 새로운 필드를 추가할 수 있다.
- **데이터를 조회하는 속도**가 빨라진다.
  - 어플리케이션이 필요로 하는 형식으로 저장되기 때문!
- 수직, 수평으로의 확장이 가능하여 어플리케이션의 모든 읽기/쓰기 요청을 처리할 수 있다.

#### NoSQL 단점

- 데이터 구조 결정을 미루게 될 수 있다.
- **데이터 중복을 계속 업데이트** 해야한다.
- 데이터가 여러 컬렉션에 중복되어 있기 때문에, **수정 시 모든 컬렉션에서** 수행해야 한다.

<br>

### SQL 데이터베이스 사용이 더 좋은 경우

- **관계**를 맺고 있는 데이터가 **자주 변경**되는 경우
  - NoSQL에서는 관계를 맺고 있는 컬렉션들을 **모두 수정**해야 하기 때문에 비효율적이다.
- **변경될 여지가 없고**, **명확한 스키마**가 사용자와 데이터에 중요한 경우

<br>

### NoSQL 데이터베이스 사용이 더 좋은 경우

- 정확한 **데이터 구조를 확정할 수 없는** 경우
- 데이터 구조가 **변경, 확장될 가능성**이 있는 경우
- 읽기를 자주 하지만 **데이터 변경은 자주 없는** 경우
- **막대한 양의 데이터**를 다뤄야 하는 경우

<br>

## 완전한 정답이 있는 것은 아니다!

하나의 제시 방법이지, 완전한 정답이 정해져 있는 것은 아니다!

- SQL을 선택하여 복잡한 JOIN문을 만들지 않도록 설계하여 단점을 없앨 수 있고,
- NoSQL을 선택하여 중복 데이터를 줄이는 방법으로 설계하여 단점을 없앨 수 있다.

<br>

---

<br>

## Reference

- [신입 개발자 전공 지식 & 기술 면접 백과사전](https://gyoogle.dev/blog/computer-science/data-base/SQL%20&%20NOSQL.html)
